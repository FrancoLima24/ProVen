<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrar o Modificar Usuario</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    
</head>

<body>
<div class="container">
    <h1>Registrar o Modificar Usuario</h1>
    <form id="registerForm" method="POST">
        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" name="nombre" value="{{ nombre if nombre else '' }}" required>

        <label for="password">Contraseña:</label>
        <input type="password" id="password" name="password" required>

        <label for="confirm_password">Repetir Contraseña:</label>
        <input type="password" id="confirm_password" name="confirm_password" required>
        <div id="passwordError" class="error-message"></div>

        <label for="id_rol">Rol:</label>
        <select id="id_rol" name="id_rol" required>
            <option value="">Selecciona un rol</option>
            <option value="1" {% if id_rol == 1 %}selected{% endif %}>Administrador</option>
            <option value="2" {% if id_rol == 2 %}selected{% endif %}>Encargado</option>
            <option value="3" {% if id_rol == 3 %}selected{% endif %}>Empleado</option>
        </select>

        <button type="submit" class="btn btn-primary">Guardar</button>
        <a href="{{ url_for('index') }}" class="btn-secondary">Volver a la lista</a>
    </form>
</div>

<script>
    $(document).ready(function () {
        $('#registerForm').on('submit', function (e) {
            var password = $('#password').val();
            var confirmPassword = $('#confirm_password').val();

            if (password !== confirmPassword) {
                e.preventDefault();
                $('#passwordError').text('Las contraseñas no coinciden.');
            }
        });
    });
</script>
</body>
</html>
